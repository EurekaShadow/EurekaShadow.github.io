---
slug: LeetCode6
title: Z å­—å½¢å˜æ¢
authors: eurekaX
tags: [æ•°ç»„]
---
import { Highlight, Keyword, Light, B1, B2, B3, BH3, B3W, MyColor} from '@site/src/components/ForMDX';


### <B2>[åŠ›æ‰£é¢è¯•ç»å…¸â€”â€”6é¢˜](https://leetcode.cn/problems/zigzag-conversion/description/?envType=study-plan-v2&envId=top-interview-150 "åŠ›æ‰£")</B2>

<!-- truncate -->


### ğŸ’¡ å‚è€ƒä»£ç ï¼š

```c
/**
 * Zå­—å½¢å˜æ¢å‡½æ•°
 * @param s è¾“å…¥å­—ç¬¦ä¸²
 * @param numRows æŒ‡å®šè¡Œæ•°
 * @return å˜æ¢åçš„å­—ç¬¦ä¸²
 * 
 * è§£é¢˜æ€è·¯:
 * 1. å¯¹äºç¬¬0è¡Œå’Œç¬¬numRows-1è¡Œï¼Œå­—ç¬¦é—´éš”å›ºå®šä¸º2*(numRows-1)
 * 2. å¯¹äºä¸­é—´è¡Œï¼Œå­—ç¬¦äº¤æ›¿å‡ºç°åœ¨ä¸¤ä¸ªç­‰å·®æ•°åˆ—ä¸­
 * 3. ç‰¹æ®Šæƒ…å†µï¼šnumRows=1æ—¶ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
 */
char* convert(char* s, int numRows) {
    int len = strlen(s);
    
    // ç‰¹æ®Šæƒ…å†µï¼šè¡Œæ•°ä¸º1æˆ–å­—ç¬¦ä¸²é•¿åº¦å°äºè¡Œæ•°æ—¶ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
    if (numRows == 1 || numRows >= len) {
        return s;
    }
    
    // åˆ†é…ç»“æœå­—ç¬¦ä¸²ç©ºé—´
    char* result = (char*)malloc((len + 1) * sizeof(char));
    int index = 0;
    
    // è®¡ç®—å‘¨æœŸé•¿åº¦
    int cycleLen = 2 * numRows - 2;
    
    // æŒ‰è¡Œéå†
    for (int i = 0; i < numRows; i++) {
        // éå†æ¯ä¸ªå‘¨æœŸ
        for (int j = 0; j + i < len; j += cycleLen) {
            // æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆå‚ç›´åˆ—ä¸Šçš„å­—ç¬¦ï¼‰
            result[index++] = s[j + i];
            
            // ä¸­é—´è¡Œçš„ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆæ–œçº¿ä¸Šçš„å­—ç¬¦ï¼‰
            // æ¡ä»¶ï¼šä¸æ˜¯ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œï¼Œä¸”ç´¢å¼•ä¸è¶Šç•Œ
            if (i != 0 && i != numRows - 1 && j + cycleLen - i < len) {
                result[index++] = s[j + cycleLen - i];
            }
        }
    }
    
    result[index] = '\0';  // å­—ç¬¦ä¸²ç»“æŸç¬¦
    return result;
}
```

### ğŸ“– æ€»ç»“ï¼š

<details>
<summary>ç‚¹å‡»å±•å¼€é¢˜ç›®æ€»ç»“</summary>
# ğŸ¤” Zå­—å½¢å˜æ¢

---

## 1ï¸âƒ£ é¢˜ç›®æ ¸å¿ƒä¿¡æ¯

ğŸ¯ **åŠŸèƒ½æè¿°**ï¼šå°†å­—ç¬¦ä¸²æŒ‰ç…§Zå­—å½¢æ–¹å¼æ’åˆ—åï¼ŒæŒ‰è¡Œè¯»å–ç”Ÿæˆæ–°å­—ç¬¦ä¸²

ğŸ“¥ **è¾“å…¥è¾“å‡º**ï¼š
- **è¾“å…¥**ï¼š`s`ï¼ˆè¾“å…¥å­—ç¬¦ä¸²ï¼‰ï¼Œ`numRows`ï¼ˆæŒ‡å®šè¡Œæ•°ï¼‰
- **è¾“å‡º**ï¼šæŒ‰Zå­—å½¢æ’åˆ—åé€è¡Œè¯»å–çš„æ–°å­—ç¬¦ä¸²

---

## 2ï¸âƒ£ å®ç°åŸç†

ğŸ’¡ **æ ¸å¿ƒæ€è·¯**ï¼šé€šè¿‡æ•°å­¦æ–¹æ³•ç›´æ¥è®¡ç®—æ¯è¡Œå­—ç¬¦çš„ä½ç½®ï¼Œé¿å…æ„é€ äºŒç»´çŸ©é˜µ

ğŸ“‹ **å®ç°æ­¥éª¤**ï¼š
1. å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šå½“`numRows`ä¸º1æˆ–å¤§äºç­‰äºå­—ç¬¦ä¸²é•¿åº¦æ—¶ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
2. è®¡ç®—Zå­—å½¢å‘¨æœŸé•¿åº¦ï¼š`2*numRows-2`
3. æŒ‰è¡Œéå†ï¼Œå¯¹æ¯è¡Œè®¡ç®—å¯¹åº”å­—ç¬¦ä½ç½®
4. å¯¹äºé¦–å°¾è¡Œï¼Œå­—ç¬¦é—´éš”å›ºå®šï¼›å¯¹äºä¸­é—´è¡Œï¼Œæ¯ä¸ªå‘¨æœŸæœ‰ä¸¤ä¸ªå­—ç¬¦ä½ç½®

---

## 3ï¸âƒ£ å…³é”®ç‚¹è§£æ

### ğŸ¯ ä»£ç æŠ€å·§
- åˆ©ç”¨å‘¨æœŸæ€§è§„å¾‹é¿å…å®é™…æ„é€ Zå­—å½¢çŸ©é˜µ
- é€šè¿‡ç´¢å¼•è®¡ç®—ç›´æ¥å®šä½å­—ç¬¦ä½ç½®
- åˆ†åˆ«å¤„ç†é¦–å°¾è¡Œå’Œä¸­é—´è¡Œçš„ä¸åŒå­—ç¬¦åˆ†å¸ƒè§„å¾‹

## 4ï¸âƒ£ ä½¿ç”¨åœºæ™¯

### âœ… é€‚ç”¨æƒ…å†µï¼š
- éœ€è¦æŒ‰ç‰¹å®šè§„å¾‹é‡æ–°æ’åˆ—å­—ç¬¦ä¸²
- å­—ç¬¦ä¸²å˜æ¢ç±»é—®é¢˜
- éœ€è¦ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦çš„åœºæ™¯

### âš ï¸ å‰ææ¡ä»¶ï¼š
- è¾“å…¥å­—ç¬¦ä¸²éç©º
- è¡Œæ•°å¤§äº0

## 5ï¸âƒ£ å¤æ‚åº¦åˆ†æ

- â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­nä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œæ¯ä¸ªå­—ç¬¦è®¿é—®ä¸€æ¬¡

- ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œä¸è€ƒè™‘ç»“æœå­—ç¬¦ä¸²çš„è¯åªä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´

## 6ï¸âƒ£ æ³¨æ„äº‹é¡¹

### ğŸš© è¾¹ç•Œæƒ…å†µï¼š
- `numRows = 1`æ—¶ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
- å­—ç¬¦ä¸²é•¿åº¦ä¸º1çš„æƒ…å†µ
- `numRows`å¤§äºå­—ç¬¦ä¸²é•¿åº¦çš„æƒ…å†µ

### ğŸ’¥ æ˜“é”™ç‚¹ï¼š
- å¿˜è®°å¤„ç†`numRows = 1`çš„ç‰¹æ®Šæƒ…å†µå¯¼è‡´é™¤é›¶é”™è¯¯
- ä¸­é—´è¡Œå­—ç¬¦ä½ç½®è®¡ç®—é”™è¯¯
- å­—ç¬¦ä¸²ç»“æŸç¬¦`\0`å¿˜è®°æ·»åŠ 

## 7âƒ£ è¡¥å……è¯´æ˜

### æ•´ä½“æ€è·¯

è¿™ä¸ªç®—æ³•é‡‡ç”¨**æŒ‰è¡Œè¯»å–**çš„æ–¹å¼ï¼Œç›´æ¥ä»åŸå­—ç¬¦ä¸²ä¸­æŒ‰Zå­—å½¢é¡ºåºæå–å­—ç¬¦ã€‚

### ä»£ç è¯¦è§£

1. åˆå§‹åŒ–å’Œç‰¹æ®Šæƒ…å†µå¤„ç†
```
int len = strlen(s);
// ç‰¹æ®Šæƒ…å†µï¼šè¡Œæ•°ä¸º1æˆ–å­—ç¬¦ä¸²é•¿åº¦å°äºè¡Œæ•°æ—¶ï¼Œç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
if (numRows == 1 || numRows >= len) {
    return s;
}
```
è§£é‡Šï¼š

- å½“ `numRows = 1` æ—¶ï¼ŒZå­—å½¢æ’åˆ—å°±æ˜¯åŸå­—ç¬¦ä¸²æœ¬èº«
- å½“ `numRows >= len` æ—¶ï¼Œæ¯è¡Œæœ€å¤šä¸€ä¸ªå­—ç¬¦ï¼Œç»“æœä¹Ÿæ˜¯åŸå­—ç¬¦ä¸²

2. å…³é”®å‚æ•°è®¡ç®—
```
int cycleLen = 2 * numRows - 2;
```
è§£é‡Šï¼šè®¡ç®—Zå­—å½¢çš„å‘¨æœŸé•¿åº¦

- ä¾‹å¦‚ `numRows = 3` æ—¶ï¼Œ`cycleLen = 2*3-2 = 4`
- è¿™æ„å‘³ç€æ¯`4`ä¸ªå­—ç¬¦ä¸ºä¸€ä¸ªå®Œæ•´çš„`V`å­—å½¢å‘¨æœŸ

3. æŒ‰è¡Œéå†æ ¸å¿ƒé€»è¾‘
```
for (int i = 0; i < numRows; i++) {
    for (int j = 0; j + i < len; j += cycleLen) {
        result[index++] = s[j + i];
        
        if (i != 0 && i != numRows - 1 && j + cycleLen - i < len) {
            result[index++] = s[j + cycleLen - i];
        }
    }
}
```

### è¯¦ç»†ä¾‹å­æ¼”ç¤º

ä»¥ `s = "PAYPALISHIRING"`, `numRows = 3` ä¸ºä¾‹ï¼š
```
åŸå­—ç¬¦ä¸²ç´¢å¼•: 0 1 2 3 4 5 6 7 8 9 10 11 12 13
åŸå­—ç¬¦ä¸²:     P A Y P A L I S H I R  I  N  G
cycleLen = 2*3-2 = 4
```
ç¬¬0è¡Œ (i=0)ï¼š
```
j=0:  j+i=0, å–s[0]='P'
j=4:  j+i=4, å–s[4]='A'  
j=8:  j+i=8, å–s[8]='H'
j=12: j+i=12,å–s[12]='N'
ç¬¬0è¡Œç»“æœ: PAHN
```

ç¬¬1è¡Œ (i=1)ï¼š
```
j=0: j+i=1, å–s[1]='A'
     j+cycleLen-i = 0+4-1=3, å–s[3]='P'
j=4: j+i=5, å–s[5]='L'
     j+cycleLen-i = 4+4-1=7, å–s[7]='S'
j=8: j+i=9, å–s[9]='I'
     j+cycleLen-i = 8+4-1=11,å–s[11]='I'
j=12:j+i=13,å–s[13]='G'
ç¬¬1è¡Œç»“æœ: APLSIIG
```

ç¬¬2è¡Œ (i=2)ï¼š
```
j=0: j+i=2, å–s[2]='Y'
j=4: j+i=6, å–s[6]='I'
j=8: j+i=10,å–s[10]='R'
ç¬¬2è¡Œç»“æœ: YIR
```

### Zå­—å½¢å›¾å½¢åŒ–ç†è§£
```
P     A     H     N        // i=0, ç´¢å¼•: 0,4,8,12
 A   P L   S I   I G       // i=1, ç´¢å¼•: 1,3,5,7,9,11,13
  Y     I     R            // i=2, ç´¢å¼•: 2,6,10
```

### æ ¸å¿ƒè§„å¾‹

  1.å‚ç›´åˆ—å­—ç¬¦ï¼šä½äºç´¢å¼• `j + i` å¤„

  2.æ–œçº¿å­—ç¬¦ï¼šä½äºç´¢å¼• `j + cycleLen - i` å¤„ï¼ˆä»…ä¸­é—´è¡Œï¼‰

  3.å‘¨æœŸè·³è·ƒï¼šæ¯æ¬¡è·³è·ƒ `cycleLen` ä¸ªä½ç½®
  
**æ—¶é—´å¤æ‚åº¦**
- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œæ¯ä¸ªå­—ç¬¦åªè®¿é—®ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œç”¨äºå­˜å‚¨ç»“æœå­—ç¬¦ä¸²

è¿™ç§æ–¹æ³•é¿å…äº†æ„é€ äºŒç»´æ•°ç»„çš„é¢å¤–ç©ºé—´ï¼Œç›´æ¥é€šè¿‡æ•°å­¦è®¡ç®—å®šä½å­—ç¬¦ä½ç½®ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚

è¿™é“é¢˜æˆ‘è‡³ä»Š**å°šæœªå®Œå…¨ç†è§£**ï¼ˆ20250815ï¼‰



</details>
