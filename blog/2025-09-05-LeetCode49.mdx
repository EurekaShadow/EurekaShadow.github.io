---
slug: LeetCode49
title: å­—æ¯å¼‚ä½è¯åˆ†ç»„
authors: eurekaX
tags: [æ•°ç»„,å“ˆå¸Œè¡¨,å­—ç¬¦ä¸²,æ’åº]
---
import { Highlight, Keyword, Light, B1, B2, B3, BH3, B3W, MyColor} from '@site/src/components/ForMDX';


### <B2>[åŠ›æ‰£é¢è¯•ç»å…¸â€”â€”49é¢˜](https://leetcode.cn/problems/group-anagrams/description/?envType=study-plan-v2&envId=top-interview-150 "åŠ›æ‰£")</B2>

<!-- truncate -->


### ğŸ’¡ å‚è€ƒä»£ç ï¼š

```c
#define MAX_STR_SIZE 100

typedef struct {
    int len;
    int idx;
    char str[MAX_STR_SIZE + 1];
} sort_str_t;

int cmp1(const void *a, const void *b)
{
    char x = *(char *)a;
    char y = *(char *)b;
    return x - y;
}

int cmp2(const void *a, const void *b)
{
    sort_str_t *x = (sort_str_t *)a;
    sort_str_t *y = (sort_str_t *)b;
    int diff = strcmp(x->str, y->str);
    if (diff != 0) {
        return diff;
    }
    return x->idx - y->idx;
}

/**
 * å°†å­—æ¯å¼‚ä½è¯ç»„åˆåœ¨ä¸€èµ·
 * @param strs è¾“å…¥çš„å­—ç¬¦ä¸²æ•°ç»„
 * @param strsSize å­—ç¬¦ä¸²æ•°ç»„çš„é•¿åº¦
 * @param returnSize è¿”å›ç»“æœçš„è¡Œæ•°
 * @param returnColumnSizes è¿”å›æ¯è¡Œçš„åˆ—æ•°
 * @return åˆ†ç»„åçš„å­—æ¯å¼‚ä½è¯äºŒç»´æ•°ç»„
 */
char*** groupAnagrams(char** strs, int strsSize, int* returnSize, int** returnColumnSizes) {
    // å¤„ç†è¾¹ç•Œæƒ…å†µ
    if (strsSize == 0) {
        *returnSize = 0;
        *returnColumnSizes = NULL;
        return NULL;
    }
    
    // åˆ†é…è¿”å›ç»“æœçš„å†…å­˜ç©ºé—´
    char ***ret = (char ***)malloc(strsSize * sizeof(char **));
    *returnColumnSizes = (int *)malloc(strsSize * sizeof(int));
    sort_str_t *hash_array = (sort_str_t *)malloc(strsSize * sizeof(sort_str_t));

    // åˆå§‹åŒ–ç»“æ„ä½“æ•°ç»„ï¼šå¤åˆ¶åŸå­—ç¬¦ä¸²å¹¶æ’åº
    for (int i = 0; i < strsSize; i++) {
        hash_array[i].len = strlen(strs[i]);
        hash_array[i].idx = i;
        strcpy(hash_array[i].str, strs[i]);
        // å¯¹æ¯ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦è¿›è¡Œæ’åº
        qsort(hash_array[i].str, hash_array[i].len, sizeof(char), cmp1);
    }
    
    // å¯¹ç»“æ„ä½“æ•°ç»„æŒ‰æ’åºåçš„å­—ç¬¦ä¸²è¿›è¡Œæ’åº
    qsort(hash_array, strsSize, sizeof(sort_str_t), cmp2);
    
    // æŒ‰æ’åºåçš„ç»“æœè¿›è¡Œåˆ†ç»„
    int ret_size = 0;
    int j = 0;
    while (j < strsSize) {
        int k = j + 1;
        // æ‰¾åˆ°æ‰€æœ‰å…·æœ‰ç›¸åŒæ’åºå­—ç¬¦ä¸²çš„å…ƒç´ 
        while (k < strsSize && !strcmp(hash_array[j].str, hash_array[k].str)) {
            k++;
        }
        
        // è®¡ç®—å½“å‰åˆ†ç»„çš„å¤§å°
        int group_size = k - j;
        (*returnColumnSizes)[ret_size] = group_size;
        
        // ä¸ºå½“å‰åˆ†ç»„åˆ†é…å†…å­˜
        ret[ret_size] = (char **)malloc(group_size * sizeof(char *));
        
        // å¡«å……å½“å‰åˆ†ç»„çš„æ•°æ®
        for (int i = 0; i < group_size; i++) {
            ret[ret_size][i] = (char *)malloc((hash_array[j].len + 1) * sizeof(char));
            strcpy(ret[ret_size][i], strs[hash_array[i + j].idx]);
        }
        
        ret_size++;
        j += group_size;
    }
    
    *returnSize = ret_size;
    // é‡Šæ”¾ä¸´æ—¶å†…å­˜
    free(hash_array);
    
    return ret;
}
```

### ğŸ“– æ€»ç»“ï¼š

<details>
<summary>ç‚¹å‡»å±•å¼€é¢˜ç›®æ€»ç»“</summary>
# ğŸ¤” å­—æ¯å¼‚ä½è¯åˆ†ç»„

---

## 1ï¸âƒ£ é¢˜ç›®æ ¸å¿ƒä¿¡æ¯

ğŸ¯ **åŠŸèƒ½æè¿°**ï¼šå°†å­—ç¬¦ä¸²æ•°ç»„ä¸­äº’ä¸ºå­—æ¯å¼‚ä½è¯çš„å­—ç¬¦ä¸²å½’ä¸ºä¸€ç»„

ğŸ“¥ **è¾“å…¥è¾“å‡º**ï¼š
- **è¾“å…¥**ï¼š
  - `strs`: å­—ç¬¦ä¸²æ•°ç»„
  - `strsSize`: å­—ç¬¦ä¸²æ•°ç»„é•¿åº¦
- **è¾“å‡º**ï¼š
  - è¿”å›åˆ†ç»„åçš„äºŒç»´å­—ç¬¦ä¸²æ•°ç»„
  - `returnSize`: è¿”å›ç»“æœè¡Œæ•°
  - `returnColumnSizes`: è¿”å›æ¯è¡Œåˆ—æ•°çš„æ•°ç»„

---

## 2ï¸âƒ£ å®ç°åŸç†

ğŸ’¡ **æ ¸å¿ƒæ€è·¯**ï¼šåˆ©ç”¨å­—æ¯å¼‚ä½è¯æ’åºåç›¸åŒçš„ç‰¹æ€§ï¼Œé€šè¿‡æ’åºå’Œåˆ†ç»„å®ç°å½’ç±»

ğŸ“‹ **å®ç°æ­¥éª¤**ï¼š
1. å¯¹æ¯ä¸ªå­—ç¬¦ä¸²å†…éƒ¨å­—ç¬¦è¿›è¡Œæ’åºï¼Œç”Ÿæˆç»Ÿä¸€çš„é”®å€¼
2. å°†æ‰€æœ‰æ’åºåçš„å­—ç¬¦ä¸²ä¸åŸå§‹ç´¢å¼•ä¸€èµ·ä¿å­˜
3. å¯¹è¿™äº›ç»“æ„ä½“æŒ‰æ’åºåçš„å­—ç¬¦ä¸²è¿›è¡Œæ’åº
4. éå†æ’åºåçš„æ•°ç»„ï¼Œå°†ç›¸åŒé”®å€¼çš„å­—ç¬¦ä¸²å½’ä¸ºä¸€ç»„

---

## 3ï¸âƒ£ å…³é”®ç‚¹è§£æ

### ğŸ¯ ä»£ç æŠ€å·§
- ä½¿ç”¨ç»“æ„ä½“ä¿å­˜åŸå§‹ç´¢å¼•å’Œæ’åºåçš„å­—ç¬¦ä¸²ï¼Œä¾¿äºåç»­åˆ†ç»„
- ä¸¤æ¬¡æ’åºï¼šå…ˆå¯¹å­—ç¬¦ä¸²å†…éƒ¨æ’åºï¼Œå†å¯¹æ•´ä¸ªæ•°ç»„æ’åº
- çº¿æ€§æ‰«æåˆ†ç»„ï¼šæ’åºåç›¸åŒå…ƒç´ å¿…ç„¶ç›¸é‚»ï¼Œåªéœ€éå†åˆ†ç»„

## 4ï¸âƒ£ ä½¿ç”¨åœºæ™¯

### âœ… é€‚ç”¨æƒ…å†µï¼š
- éœ€è¦å¯¹å…·æœ‰ç›¸åŒå…ƒç´ ä½†é¡ºåºä¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„
- å­—ç¬¦ä¸²å¤„ç†å’Œåˆ†ç±»é—®é¢˜
- æ•°æ®å»é‡å’Œå½’ç±»æ“ä½œ

### âš ï¸ å‰ææ¡ä»¶ï¼š
- è¾“å…¥å­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯
- éœ€è¦ä¿æŒç›¸åŒå­—æ¯å¼‚ä½è¯åœ¨åŒä¸€ç»„

## 5ï¸âƒ£ å¤æ‚åº¦åˆ†æ

- â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(N * M * log M + N * log N)
  - Nä¸ºå­—ç¬¦ä¸²æ•°é‡ï¼ŒMä¸ºå­—ç¬¦ä¸²å¹³å‡é•¿åº¦
  - æ¯ä¸ªå­—ç¬¦ä¸²å†…éƒ¨æ’åºï¼šO(M * log M)
  - ç»“æ„ä½“æ•°ç»„æ’åºï¼šO(N * log N)

- ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼šO(N * M)
  - Nä¸ºå­—ç¬¦ä¸²æ•°é‡ï¼ŒMä¸ºå­—ç¬¦ä¸²å¹³å‡é•¿åº¦
  - éœ€è¦é¢å¤–ç©ºé—´å­˜å‚¨ç»“æ„ä½“æ•°ç»„å’Œç»“æœæ•°ç»„

## 6ï¸âƒ£ æ³¨æ„äº‹é¡¹

### ğŸš© è¾¹ç•Œæƒ…å†µï¼š
- ç©ºå­—ç¬¦ä¸²æ•°ç»„
- åŒ…å«ç©ºå­—ç¬¦ä¸²çš„æ•°ç»„
- åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„

### ğŸ’¥ æ˜“é”™ç‚¹ï¼š
- å¿˜è®°ä¿å­˜åŸå§‹ç´¢å¼•å¯¼è‡´æ— æ³•è·å–åŸå§‹å­—ç¬¦ä¸²
- å†…å­˜åˆ†é…åæœªæ­£ç¡®é‡Šæ”¾å¯¼è‡´å†…å­˜æ³„æ¼
- åˆ†ç»„æ—¶è¾¹ç•Œæ¡ä»¶å¤„ç†é”™è¯¯

## 7ï¸âƒ£ è¡¥å……è¯´æ˜

ä»¥è¾“å…¥æ•°ç»„ï¼š`["eat", "tea", "tan", "ate", "nat", "bat"]`ä¸ºä¾‹
### æ‰§è¡Œæ­¥éª¤è¯¦è§£
**ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–ç»“æ„ä½“æ•°ç»„**

åˆ›å»º `sort_str_t` ç»“æ„ä½“æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦ä¸²è¿›è¡Œå†…éƒ¨æ’åºï¼š
```
ç´¢å¼•0: "eat" -> æ’åºå "aet"
ç´¢å¼•1: "tea" -> æ’åºå "aet"
ç´¢å¼•2: "tan" -> æ’åºå "ant"
ç´¢å¼•3: "ate" -> æ’åºå "aet"
ç´¢å¼•4: "nat" -> æ’åºå "ant"
ç´¢å¼•5: "bat" -> æ’åºå "abt"
```
æ­¤æ—¶ `hash_array` å†…å®¹ï¼š
```
hash_array[0]: {len=3, idx=0, str="aet"}
hash_array[1]: {len=3, idx=1, str="aet"}
hash_array[2]: {len=3, idx=2, str="ant"}
hash_array[3]: {len=3, idx=3, str="aet"}
hash_array[4]: {len=3, idx=4, str="ant"}
hash_array[5]: {len=3, idx=5, str="abt"}
```

**ç¬¬äºŒæ­¥ï¼šå¯¹ç»“æ„ä½“æ•°ç»„æ’åº**
æŒ‰ç…§ `str` å­—æ®µè¿›è¡Œæ’åºï¼ˆå¦‚æœç›¸åŒåˆ™æŒ‰ `idx` æ’åºï¼‰ï¼š

æ’åºå `hash_array` å†…å®¹ï¼š
```
hash_array[0]: {len=3, idx=5, str="abt"}  // å¯¹åº” "bat"
hash_array[1]: {len=3, idx=2, str="ant"}  // å¯¹åº” "tan"
hash_array[2]: {len=3, idx=4, str="ant"}  // å¯¹åº” "nat"
hash_array[3]: {len=3, idx=0, str="aet"}  // å¯¹åº” "eat"
hash_array[4]: {len=3, idx=1, str="aet"}  // å¯¹åº” "tea"
hash_array[5]: {len=3, idx=3, str="aet"}  // å¯¹åº” "ate"
```

**ç¬¬ä¸‰æ­¥ï¼šåˆ†ç»„å¤„ç†**
## åˆ†ç»„å¤„ç†è¿‡ç¨‹

éå†æ’åºåçš„æ•°ç»„ï¼Œå°†ç›¸åŒå­—ç¬¦ä¸²çš„å½’ä¸ºä¸€ç»„ï¼š

1. å¤„ç† "abt" ç»„ï¼š
    - åªæœ‰ç´¢å¼•5ï¼ˆ"bat"ï¼‰
    - åˆ›å»ºç¬¬ä¸€ç»„ï¼š["bat"]

2. å¤„ç† "ant" ç»„ï¼š
    - ç´¢å¼•2ï¼ˆ"tan"ï¼‰å’Œç´¢å¼•4ï¼ˆ"nat"ï¼‰
    - åˆ›å»ºç¬¬äºŒç»„ï¼š["tan", "nat"]

3. å¤„ç† "aet" ç»„ï¼š
    - ç´¢å¼•0ï¼ˆ"eat"ï¼‰ã€ç´¢å¼•1ï¼ˆ"tea"ï¼‰å’Œç´¢å¼•3ï¼ˆ"ate"ï¼‰
    - åˆ›å»ºç¬¬ä¸‰ç»„ï¼š["eat", "tea", "ate"]

### æœ€ç»ˆç»“æœ
è¿”å›ç»“æœï¼š
```
[
  ["bat"],
  ["tan", "nat"],
  ["eat", "tea", "ate"]
]
```
è¿™ä¸ªç®—æ³•é€šè¿‡æ’åºå°†å­—æ¯å¼‚ä½è¯è½¬æ¢ä¸ºç›¸åŒçš„å½¢å¼ï¼Œç„¶ååˆ©ç”¨æ’åºåæ•°ç»„ä¸­ç›¸åŒå…ƒç´ å¿…ç„¶ç›¸é‚»çš„ç‰¹æ€§ï¼Œå®ç°äº†é«˜æ•ˆçš„åˆ†ç»„æ“ä½œã€‚

</details>
