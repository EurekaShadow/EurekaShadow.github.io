---
slug: LeetCode141
title: ç¯å½¢é“¾è¡¨
authors: eurekaX
tags: [å“ˆå¸Œè¡¨,é“¾è¡¨,åŒæŒ‡é’ˆ]
---
import { Highlight, Keyword, Light, B1, B2, B3, BH3, B3W, MyColor} from '@site/src/components/ForMDX';


### <B2>[åŠ›æ‰£é¢è¯•ç»å…¸â€”â€”141é¢˜](https://leetcode.cn/problems/linked-list-cycle/description/?envType=study-plan-v2&envId=top-interview-150 "åŠ›æ‰£")</B2>

<!-- truncate -->


### ğŸ’¡ å‚è€ƒä»£ç ï¼š

```c
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */

/**
 * åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯
 * 
 * ä½¿ç”¨Floydåˆ¤åœˆç®—æ³•ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰:
 * - è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªå¿«æŒ‡é’ˆå’Œä¸€ä¸ªæ…¢æŒ‡é’ˆ
 * - å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
 * - å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆ
 * - å¦‚æœé“¾è¡¨ä¸­æ— ç¯ï¼Œå¿«æŒ‡é’ˆä¼šå…ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾
 * 
 * æ—¶é—´å¤æ‚åº¦: O(n) - æœ€å¤šéå†é“¾è¡¨ä¸¤æ¬¡
 * ç©ºé—´å¤æ‚åº¦: O(1) - åªä½¿ç”¨äº†ä¸¤ä¸ªæŒ‡é’ˆçš„å¸¸é‡ç©ºé—´
 * 
 * @param head é“¾è¡¨çš„å¤´èŠ‚ç‚¹
 * @return å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
bool hasCycle(struct ListNode *head) {
    // å¤„ç†ç©ºé“¾è¡¨æˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µ
    if (head == NULL || head->next == NULL) {
        return false;
    }
    
    // åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆ
    // æ…¢æŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå¿«æŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    struct ListNode *slow = head;
    struct ListNode *fast = head->next;
    
    // å½“å¿«æ…¢æŒ‡é’ˆä¸ç›¸ç­‰æ—¶ç»§ç»­å¾ªç¯
    while (slow != fast) {
        // å¦‚æœå¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾ï¼Œè¯´æ˜æ— ç¯
        if (fast == NULL || fast->next == NULL) {
            return false;
        }
        
        // ç§»åŠ¨æ…¢æŒ‡é’ˆä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆä¸¤æ­¥
        slow = slow->next;
        fast = fast->next->next;
    }
    
    // å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜å­˜åœ¨ç¯
    return true;
}
```

### ğŸ“– æ€»ç»“ï¼š

<details>
<summary>ç‚¹å‡»å±•å¼€é¢˜ç›®æ€»ç»“</summary>
# ğŸ¤” ç¯å½¢é“¾è¡¨

---

## 1ï¸âƒ£ é¢˜ç›®æ ¸å¿ƒä¿¡æ¯

ğŸ¯ **åŠŸèƒ½æè¿°**ï¼šåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨ç¯ç»“æ„

ğŸ“¥ **è¾“å…¥è¾“å‡º**ï¼š
- **è¾“å…¥**ï¼š`head` - é“¾è¡¨çš„å¤´èŠ‚ç‚¹
- **è¾“å‡º**ï¼šå¸ƒå°”å€¼ - å­˜åœ¨ç¯è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`

---

## 2ï¸âƒ£ å®ç°åŸç†

ğŸ’¡ **æ ¸å¿ƒæ€è·¯**ï¼šä½¿ç”¨Floydåˆ¤åœˆç®—æ³•ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰ï¼Œé€šè¿‡ä¸¤ä¸ªä¸åŒé€Ÿåº¦çš„æŒ‡é’ˆéå†é“¾è¡¨ï¼Œè‹¥å­˜åœ¨ç¯åˆ™å¿«æŒ‡é’ˆä¼šè¿½ä¸Šæ…¢æŒ‡é’ˆ

ğŸ“‹ **å®ç°æ­¥éª¤**ï¼š
1. ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šç©ºé“¾è¡¨æˆ–å•èŠ‚ç‚¹é“¾è¡¨ç›´æ¥è¿”å› `false`
2. åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆï¼šæ…¢æŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå¿«æŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
3. å¾ªç¯ç§»åŠ¨æŒ‡é’ˆï¼šæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥
4. åˆ¤æ–­ç›¸é‡ï¼šè‹¥ä¸¤æŒ‡é’ˆç›¸é‡åˆ™å­˜åœ¨ç¯ï¼Œè‹¥å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾åˆ™æ— ç¯

---

## 3ï¸âƒ£ å…³é”®ç‚¹è§£æ

### ğŸ¯ ä»£ç æŠ€å·§
- ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæŠ€å·§è§£å†³ç¯å½¢é—®é¢˜
- å·§å¦™åˆ©ç”¨æŒ‡é’ˆé€Ÿåº¦å·®æ£€æµ‹ç¯çš„å­˜åœ¨
- è¾¹ç•Œæ¡ä»¶å¤„ç†ï¼šæå‰åˆ¤æ–­ç©ºé“¾è¡¨å’Œå•èŠ‚ç‚¹æƒ…å†µ

## 4ï¸âƒ£ ä½¿ç”¨åœºæ™¯

### âœ… é€‚ç”¨æƒ…å†µï¼š
- æ£€æµ‹é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨
- åˆ¤æ–­æ•°æ®ç»“æ„æ˜¯å¦æœ‰ç¯çŠ¶ç»“æ„
- å†…å­˜æ³„æ¼æ£€æµ‹ä¸­çš„å¾ªç¯å¼•ç”¨æ£€æŸ¥

### âš ï¸ å‰ææ¡ä»¶ï¼š
- é“¾è¡¨èŠ‚ç‚¹ç»“æ„åŒ…å« `next` æŒ‡é’ˆ
- å¯ä»¥ä¿®æ”¹æˆ–è®¿é—®é“¾è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸ

## 5ï¸âƒ£ å¤æ‚åº¦åˆ†æ

- â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨èŠ‚ç‚¹æ•°ï¼Œæœ€åæƒ…å†µä¸‹éœ€è¦éå†æ•´ä¸ªé“¾è¡¨
- ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªä½¿ç”¨äº†ä¸¤ä¸ªæŒ‡é’ˆçš„å¸¸é‡ç©ºé—´

## 6ï¸âƒ£ æ³¨æ„äº‹é¡¹

### ğŸš© è¾¹ç•Œæƒ…å†µï¼š
- ç©ºé“¾è¡¨ (`head == NULL`)
- å•èŠ‚ç‚¹é“¾è¡¨ (`head->next == NULL`)
- ä¸¤èŠ‚ç‚¹é“¾è¡¨çš„ç¯æƒ…å†µ

### ğŸ’¥ æ˜“é”™ç‚¹ï¼š
- å¿«æŒ‡é’ˆç§»åŠ¨æ—¶éœ€è¦æ£€æŸ¥ `fast` å’Œ `fast->next` æ˜¯å¦ä¸º NULL
- æŒ‡é’ˆåˆå§‹åŒ–ä½ç½®çš„é€‰æ‹©å½±å“å¾ªç¯æ¡ä»¶
- å¾ªç¯ç»“æŸæ¡ä»¶çš„åˆ¤æ–­å®¹æ˜“å‡ºé”™

## 7ï¸âƒ£ è¡¥å……è¯´æ˜
#### ç¤ºä¾‹1ï¼šæœ‰ç¯é“¾è¡¨ [3,2,0,-4]ï¼Œpos=1

```c
// åˆ›å»ºé“¾è¡¨èŠ‚ç‚¹
struct ListNode n1, n2, n3, n4;
n1.val = 3;
n2.val = 2;
n3.val = 0;
n4.val = -4;

// æ„å»ºé“¾è¡¨è¿æ¥å…³ç³»
n1.next = &n2;  // 3 -> 2
n2.next = &n3;  // 2 -> 0
n3.next = &n4;  // 0 -> -4
n4.next = &n2;  // -4 -> 2 (å½¢æˆç¯ï¼ŒæŒ‡å‘ç´¢å¼•1çš„èŠ‚ç‚¹)

// æ‰§è¡ŒhasCycle(&n1)
// åˆå§‹çŠ¶æ€: slow = &n1(3), fast = &n2(2)
// ç¬¬1è½®: slow = &n2(2), fast = &n4(-4)
// ç¬¬2è½®: slow = &n3(0), fast = &n3(0)  // ç›¸é‡ï¼
// è¿”å› true
```
#### ç¤ºä¾‹2ï¼šæ— ç¯é“¾è¡¨ [1,2]
```c
// åˆ›å»ºé“¾è¡¨èŠ‚ç‚¹
struct ListNode n1, n2;
n1.val = 1;
n2.val = 2;

// æ„å»ºé“¾è¡¨è¿æ¥å…³ç³»
n1.next = &n2;  // 1 -> 2
n2.next = NULL; // 2 -> NULL (æ— ç¯)

// æ‰§è¡ŒhasCycle(&n1)
// åˆå§‹çŠ¶æ€: slow = &n1(1), fast = &n2(2)
// æ£€æŸ¥ fast->next == NULLï¼Œç›´æ¥è¿”å› false
```
#### ç¤ºä¾‹3ï¼šå•èŠ‚ç‚¹ç¯ [1]ï¼Œpos=0
```c
// åˆ›å»ºé“¾è¡¨èŠ‚ç‚¹
struct ListNode n1;
n1.val = 1;
n1.next = &n1;  // 1 -> 1 (è‡ªå·±æŒ‡å‘è‡ªå·±)

// æ‰§è¡ŒhasCycle(&n1)
// åˆå§‹çŠ¶æ€: slow = &n1(1), fast = &n1(1)
// å¼€å§‹å¾ªç¯å‰ slow == fastï¼Œç›´æ¥è·³å‡ºå¾ªç¯
// è¿”å› true
```
#### ğŸ¯ ç»“æ„ä½“ä½¿ç”¨æ–¹å¼
```c
// åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹
struct ListNode node1;
node1.val = 10;           // èŠ‚ç‚¹å­˜å‚¨çš„å€¼æ˜¯10
node1.next = NULL;        // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆæš‚æ—¶ä¸ºç©ºï¼‰

// åˆ›å»ºå¦ä¸€ä¸ªèŠ‚ç‚¹å¹¶è¿æ¥
struct ListNode node2;
node2.val = 20;
node2.next = NULL;

// å»ºç«‹è¿æ¥ï¼šnode1æŒ‡å‘node2
node1.next = &node2;      // &node2æ˜¯node2çš„åœ°å€
```
</details>
