---
slug: LeetCode155
title: æœ€å°æ ˆ
authors: eurekaX
tags: [æ ˆ,è®¾è®¡]
---
import { Highlight, Keyword, Light, B1, B2, B3, BH3, B3W, MyColor} from '@site/src/components/ForMDX';


### <B2>[åŠ›æ‰£é¢è¯•ç»å…¸â€”â€”155é¢˜](https://leetcode.cn/problems/min-stack/description/?envType=study-plan-v2&envId=top-interview-150 "åŠ›æ‰£")</B2>

<!-- truncate -->


### ğŸ’¡ å‚è€ƒä»£ç ï¼š

```c
#include <stdio.h>
#include <stdlib.h>

/**
 * è®¾è®¡ä¸€ä¸ªæ”¯æŒ push, pop, top æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚
 */

// å®šä¹‰æ ˆèŠ‚ç‚¹ç»“æ„ä½“
typedef struct Node {
    int data;       // å­˜å‚¨å½“å‰å€¼
    int min;        // å­˜å‚¨å½“å‰æ ˆä¸­çš„æœ€å°å€¼
    struct Node* next;
} Node;

// å®šä¹‰ MinStack ç»“æ„ä½“
typedef struct {
    Node* top;      // æ ˆé¡¶æŒ‡é’ˆ
} MinStack;

/**
 * åˆå§‹åŒ–å †æ ˆå¯¹è±¡
 */
MinStack* minStackCreate() {
    MinStack* stack = (MinStack*)malloc(sizeof(MinStack));
    stack->top = NULL;
    return stack;
}

/**
 * å°†å…ƒç´  val æ¨å…¥å †æ ˆ
 * @param obj MinStack å®ä¾‹
 * @param val è¦å‹å…¥æ ˆçš„æ•´æ•°å€¼
 */
void minStackPush(MinStack* obj, int val) {
    Node* newNode = (Node*)malloc(sizeof(Node));
    newNode->data = val;
    
    // å¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™å½“å‰å…ƒç´ å°±æ˜¯æœ€å°å€¼
    if (obj->top == NULL) {
        newNode->min = val;
    } else {
        // å¦åˆ™æ¯”è¾ƒå½“å‰å€¼å’Œæ ˆé¡¶è®°å½•çš„æœ€å°å€¼ï¼Œå–è¾ƒå°è€…ä½œä¸ºæ–°çš„æœ€å°å€¼
        newNode->min = (val < obj->top->min) ? val : obj->top->min;
    }
    
    // æ–°èŠ‚ç‚¹æ’å…¥åˆ°æ ˆé¡¶
    newNode->next = obj->top;
    obj->top = newNode;
}

/**
 * åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ 
 * @param obj MinStack å®ä¾‹
 */
void minStackPop(MinStack* obj) {
    if (obj->top != NULL) {
        Node* temp = obj->top;
        obj->top = obj->top->next;
        free(temp);
    }
}

/**
 * è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ 
 * @param obj MinStack å®ä¾‹
 * @return æ ˆé¡¶å…ƒç´ çš„å€¼
 */
int minStackTop(MinStack* obj) {
    if (obj->top != NULL) {
        return obj->top->data;
    }
    return 0; // æ­¤å¤„æ ¹æ®é¢˜ç›®ä¿è¯ä¸ä¼šå‡ºç°ç©ºæ ˆè°ƒç”¨
}

/**
 * è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ 
 * @param obj MinStack å®ä¾‹
 * @return å½“å‰æ ˆä¸­çš„æœ€å°å€¼
 */
int minStackGetMin(MinStack* obj) {
    if (obj->top != NULL) {
        return obj->top->min;
    }
    return 0; // æ­¤å¤„æ ¹æ®é¢˜ç›®ä¿è¯ä¸ä¼šå‡ºç°ç©ºæ ˆè°ƒç”¨
}

/**
 * é‡Šæ”¾å †æ ˆå†…å­˜
 * @param obj MinStack å®ä¾‹
 */
void minStackFree(MinStack* obj) {
    while (obj->top != NULL) {
        Node* temp = obj->top;
        obj->top = obj->top->next;
        free(temp);
    }
    free(obj);
}
```

### ğŸ“– æ€»ç»“ï¼š

<details>
<summary>ç‚¹å‡»å±•å¼€é¢˜ç›®æ€»ç»“</summary>
# ğŸ¤” æœ€å°æ ˆ

---

## 1ï¸âƒ£ é¢˜ç›®æ ¸å¿ƒä¿¡æ¯

ğŸ¯ **åŠŸèƒ½æè¿°**ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ pushã€popã€top æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆ

ğŸ“¥ **è¾“å…¥è¾“å‡º**ï¼š
- **è¾“å…¥**ï¼šä¸€ç³»åˆ—æ•´æ•°æ“ä½œåºåˆ—ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€pushã€popã€top å’Œ getMin
- **è¾“å‡º**ï¼šæ ¹æ®æ“ä½œè¿”å›å¯¹åº”çš„ç»“æœï¼Œå…¶ä¸­ getMin éœ€è¦åœ¨å¸¸æ•°æ—¶é—´å†…è¿”å›æ ˆä¸­æœ€å°å…ƒç´ 

---

## 2ï¸âƒ£ å®ç°åŸç†

ğŸ’¡ **æ ¸å¿ƒæ€è·¯**ï¼šä½¿ç”¨è¾…åŠ©æ ˆæˆ–åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­å­˜å‚¨å½“å‰æœ€å°å€¼çš„æ–¹å¼ï¼Œåœ¨æ¯æ¬¡æ“ä½œæ—¶ç»´æŠ¤æœ€å°å€¼ä¿¡æ¯

ğŸ“‹ **å®ç°æ­¥éª¤**ï¼š
1. åˆ›å»ºæ ˆèŠ‚ç‚¹ç»“æ„ä½“ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¿å­˜æ•°æ®å’Œå½“å‰æ ˆçŠ¶æ€ä¸‹çš„æœ€å°å€¼
2. åˆå§‹åŒ–æ ˆå¯¹è±¡ï¼Œå°†æ ˆé¡¶æŒ‡é’ˆè®¾ä¸º NULL
3. Push æ“ä½œæ—¶ï¼Œè®¡ç®—å½“å‰æœ€å°å€¼å¹¶ä¿å­˜åœ¨æ–°èŠ‚ç‚¹ä¸­
4. Pop æ“ä½œæ—¶ï¼Œç›´æ¥ç§»é™¤æ ˆé¡¶èŠ‚ç‚¹
5. Top æ“ä½œæ—¶ï¼Œè¿”å›æ ˆé¡¶èŠ‚ç‚¹çš„æ•°æ®å€¼
6. GetMin æ“ä½œæ—¶ï¼Œç›´æ¥è¿”å›æ ˆé¡¶èŠ‚ç‚¹è®°å½•çš„æœ€å°å€¼

---

## 3ï¸âƒ£ å…³é”®ç‚¹è§£æ

ç»™å‡ºåŸå§‹åšé¢˜æ€è·¯å¹¶æ¯”è¾ƒä¸æœ€ä¼˜è§£åŒºåˆ«ï¼ˆå¯é€‰ï¼‰

åŸå§‹æ€è·¯å¯èƒ½æ˜¯ä½¿ç”¨ä¸¤ä¸ªæ ˆåˆ†åˆ«å­˜å‚¨æ•°æ®å’Œæœ€å°å€¼ï¼Œä½†æœ€ä¼˜è§£æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ç›´æ¥å­˜å‚¨å½“å‰æœ€å°å€¼ï¼ŒèŠ‚çœäº†é¢å¤–æ ˆçš„ç©ºé—´å¼€é”€ã€‚

### ğŸ¯ ä»£ç æŠ€å·§
- åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­é¢å¤–å­˜å‚¨å½“å‰æ ˆçŠ¶æ€çš„æœ€å°å€¼
- Push æ—¶æ¯”è¾ƒæ–°å€¼ä¸å½“å‰æœ€å°å€¼ï¼Œæ›´æ–°æœ€å°å€¼å­—æ®µ
- æ‰€æœ‰æ“ä½œå‡åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ

## 4ï¸âƒ£ ä½¿ç”¨åœºæ™¯

### âœ… é€‚ç”¨æƒ…å†µï¼š
- éœ€è¦é¢‘ç¹è·å–æ ˆä¸­æœ€å°å…ƒç´ çš„åœºæ™¯
- å¯¹æ—¶é—´å¤æ‚åº¦è¦æ±‚ä¸¥æ ¼çš„åº”ç”¨
- å®ç°å¸¦æœ‰æœ€å°å€¼æŸ¥è¯¢åŠŸèƒ½çš„æ ˆç»“æ„

### âš ï¸ å‰ææ¡ä»¶ï¼š
- æ‰€æœ‰æ“ä½œéƒ½åœ¨éç©ºæ ˆä¸Šè°ƒç”¨ï¼ˆé¢˜ç›®ä¿è¯ï¼‰
- æœ€å¤šè°ƒç”¨ 3 * 10^4 æ¬¡æ“ä½œ

## 5ï¸âƒ£ å¤æ‚åº¦åˆ†æ

- â±ï¸ æ—¶é—´å¤æ‚åº¦ï¼šO(1) - æ‰€æœ‰æ“ä½œï¼ˆpushã€popã€topã€getMinï¼‰éƒ½æ˜¯å¸¸æ•°æ—¶é—´å¤æ‚åº¦
- ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼šO(n) - éœ€è¦ä¸ºæ¯ä¸ªå…ƒç´ åˆ†é…èŠ‚ç‚¹ç©ºé—´ï¼Œnä¸ºæ“ä½œæ¬¡æ•°

## 6ï¸âƒ£ æ³¨æ„äº‹é¡¹

### ğŸš© è¾¹ç•Œæƒ…å†µï¼š
- ç©ºæ ˆæ“ä½œï¼ˆé¢˜ç›®ä¿è¯ä¸ä¼šå‡ºç°ï¼‰
- æ ˆä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µ
- è¿ç»­ Push è¾ƒå°å€¼å Pop çš„æƒ…å†µ

### ğŸ’¥ æ˜“é”™ç‚¹ï¼š
- å¿˜è®°åœ¨ Push æ—¶æ›´æ–°æœ€å°å€¼
- Pop æ“ä½œåæœ€å°å€¼æœªæ­£ç¡®æ›´æ–°
- å†…å­˜æ³„æ¼ï¼ˆæœªæ­£ç¡®é‡Šæ”¾èŠ‚ç‚¹å†…å­˜ï¼‰

## 7ï¸âƒ£ è¡¥å……è¯´æ˜
### ğŸ“Œ ç¤ºä¾‹è¾“å…¥ï¼š
```c
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]
```

### æ­¥éª¤ 1: `MinStack* obj = minStackCreate();`
- åˆ›å»ºç©ºæ ˆ
- æ ˆçŠ¶æ€ï¼š`obj->top = NULL`

### æ­¥éª¤ 2: `minStackPush(obj, -2);`
- åˆ›å»ºæ–°èŠ‚ç‚¹ï¼š`data = -2`
- å› ä¸ºæ ˆä¸ºç©ºï¼Œæ‰€ä»¥ `min = -2`
- æ–°èŠ‚ç‚¹æˆä¸ºæ ˆé¡¶
- æ ˆçŠ¶æ€ï¼š`top -> {-2, -2}`

### æ­¥éª¤ 3: `minStackPush(obj, 0);`
- åˆ›å»ºæ–°èŠ‚ç‚¹ï¼š`data = 0`
- æ¯”è¾ƒ `0` ä¸å½“å‰æœ€å°å€¼ `-2`ï¼Œæœ€å°å€¼ä»ä¸º `-2`
- æ–°èŠ‚ç‚¹æˆä¸ºæ ˆé¡¶
- æ ˆçŠ¶æ€ï¼š`top -> {0, -2} -> {-2, -2}`

### æ­¥éª¤ 4: `minStackPush(obj, -3);`
- åˆ›å»ºæ–°èŠ‚ç‚¹ï¼š`data = -3`
- æ¯”è¾ƒ `-3` ä¸å½“å‰æœ€å°å€¼ `-2`ï¼Œæ›´æ–°æœ€å°å€¼ä¸º `-3`
- æ–°èŠ‚ç‚¹æˆä¸ºæ ˆé¡¶
- æ ˆçŠ¶æ€ï¼š`top -> {-3, -3} -> {0, -2} -> {-2, -2}`

### æ­¥éª¤ 5: `minStackGetMin(obj);`
- ç›´æ¥è¿”å›æ ˆé¡¶èŠ‚ç‚¹è®°å½•çš„æœ€å°å€¼ï¼š`-3`
- æ ˆçŠ¶æ€ä¿æŒä¸å˜

### æ­¥éª¤ 6: `minStackPop(obj);`
- ç§»é™¤æ ˆé¡¶èŠ‚ç‚¹ `{-3, -3}`
- æ ˆé¡¶å˜ä¸º `{0, -2}`
- æ ˆçŠ¶æ€ï¼š`top -> {0, -2} -> {-2, -2}`

### æ­¥éª¤ 7: `minStackTop(obj);`
- è¿”å›æ ˆé¡¶èŠ‚ç‚¹çš„æ•°æ®å€¼ï¼š`0`
- æ ˆçŠ¶æ€ä¿æŒä¸å˜

### æ­¥éª¤ 8: `minStackGetMin(obj);`
- ç›´æ¥è¿”å›æ ˆé¡¶èŠ‚ç‚¹è®°å½•çš„æœ€å°å€¼ï¼š`-2`
- æ ˆçŠ¶æ€ä¿æŒä¸å˜

### âœ… æœ€ç»ˆè¾“å‡ºï¼š
```c
[null,null,null,null,-3,null,0,-2]
```
### ğŸ“Š æ ˆçŠ¶æ€å˜åŒ–å›¾ç¤ºï¼š
```
åˆå§‹çŠ¶æ€:
NULL

Push(-2)å:
top -> [-2, -2]

Push(0)å:
top -> [0, -2]  ->  [-2, -2]

Push(-3)å:
top -> [-3, -3]  ->  [0, -2]  ->  [-2, -2]

GetMin():
è¿”å› -3

Pop()å:
top -> [0, -2]  ->  [-2, -2]

Top():
è¿”å› 0

GetMin():
è¿”å› -2
```
é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜äº†å½“å‰çŠ¶æ€ä¸‹çš„æœ€å°å€¼ï¼Œè¿™æ ·æ— è®ºä½•æ—¶è°ƒç”¨ `getMin()` éƒ½èƒ½ç«‹å³è¿”å›ç»“æœï¼Œå®ç°äº† O(1) æ—¶é—´å¤æ‚åº¦çš„æœ€å°å€¼æŸ¥è¯¢ã€‚
</details>
